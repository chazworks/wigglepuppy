# WordPress to WigglePuppy Rebranding Plan
_This document was generated by JetBrains Junie_

## Introduction

This document outlines a comprehensive plan for rebranding "WordPress" to "WigglePuppy" throughout the codebase. The rebranding process involves identifying and replacing all instances of "WordPress" with "WigglePuppy" while adhering to specific caveats to maintain functionality and respect original attributions.

## Rebranding Caveats

The following caveats must be strictly observed during the rebranding process:

1. **Copyright Notices and Author Attributions**: All copyright notices and author attributions must remain unchanged. These include:
   - Copyright headers in files
   - Author tags in docblocks
   - Contributor lists
   - License attributions

2. **PHP Identifiers**: All PHP identifiers containing "wordpress" must not be changed. This includes variable names, function names, class names, namespaces, and constants. For example:
   - `$wordpress_version` should remain as is
   - `get_wordpress_path()` should remain as is
   - Class methods like `init_wordpress()` should remain as is
   - Class names like `WordPress_Plugin` should remain as is
   - Namespaces like `\WordPress\Core` should remain as is
   - Constants like `WORDPRESS_VERSION` should remain as is

3. **Filenames and URLs**: Filenames and URLs containing "wordpress" must not be changed. For example:
   - `wordpress.php` should remain as is
   - `https://api.wordpress.org/` should remain as is
   - File paths like `/wp-includes/` should remain as is

4. **WordPress as an Organization**: References to WordPress as an organization (rather than the software name) should not be changed. For example:
   - "Developed by the WordPress team" should remain as is
   - "Visit wordpress.org for more information" should remain as is
   - "WordPress Foundation" should remain as is

5. **Casing Preservation**: When replacing "WordPress" with "WigglePuppy", the casing must be preserved:
   - "WordPress" → "WigglePuppy"
   - "wordpress" → "wigglepuppy"
   - "WORDPRESS" → "WIGGLEPUPPY"

6. **Co-occurrence of Terms**: Lines containing both "wordpress" and "wigglepuppy" (in any casing) on the same line must remain unchanged. These lines should be appropriately noted in generated documentation.

7. **Whitespace Preservation**: The type and amount of whitespace on a line must not be changed. This includes spaces, tabs, and line endings.

8. **Files Covered by .gitignore and rebrand-ignore.txt**: Files and directories specified in the .gitignore file or the tools/rebranding/rebrand-ignore.txt file should not be processed. These include:
   - Configuration files with sensitive information
   - Build and test tool files (including Gruntfile.js and package-lock.json)
   - Generated files and directories
   - Content files in wp-content
   - Local environment configuration files

9. **Minified Files**: Minified files should not be processed. These include:
   - Minified CSS files (*.min.css)
   - Minified JavaScript files (*.min.js)
   - Any other compressed or optimized files

10. **JavaScript Identifiers**: All JavaScript identifiers containing "wordpress" must not be changed. This includes variable names, function names, class names, module names, and npm namespaces. For example:
   - `wordpressVersion` should remain as is
   - `getWordpressPath()` should remain as is
   - Class methods like `initWordpress()` should remain as is
   - Module names like `wordpress-element` should remain as is
   - npm namespaces like `@wordpress/components` should remain as is

11. **Other Locations**: The following content should remain unchanged:
   - News and announcements should remain as is
   - Changelogs and version histories should remain as is

## Methodology for Finding Instances to Replace

### Search Patterns

To effectively identify instances of "WordPress" that should be replaced, we'll use the following search patterns:

1. Case-sensitive search for exact matches:
   - "WordPress" (with exact casing)
   - "wordpress" (all lowercase)
   - "WORDPRESS" (all uppercase)

2. Regular expression patterns to exclude variable names, function names, and filenames:
   - Exclude patterns like `\$[a-zA-Z0-9_]*wordpress[a-zA-Z0-9_]*` (for variables)
   - Exclude patterns like `function [a-zA-Z0-9_]*wordpress[a-zA-Z0-9_]*` (for functions)
   - Exclude patterns like `[a-zA-Z0-9_]*\.wordpress\.[a-zA-Z0-9_]*` (for filenames)

3. Context-aware searches to identify references to WordPress as an organization:
   - Look for phrases like "by WordPress", "WordPress team", "WordPress community"
   - Check for URLs containing "wordpress.org" or "wordpress.com"

### Tools for Searching

1. **Grep and Sed**: For command-line searching and replacing:
   ```bash
   # Find instances (excluding variables, functions, and filenames)
   grep -r "WordPress" --include="*.php" --include="*.js" --include="*.html" . | grep -v "\$[a-zA-Z0-9_]*wordpress[a-zA-Z0-9_]*" | grep -v "function [a-zA-Z0-9_]*wordpress[a-zA-Z0-9_]*"

   # Find lowercase instances
   grep -r "wordpress" --include="*.php" --include="*.js" --include="*.html" . | grep -v "\$[a-zA-Z0-9_]*wordpress[a-zA-Z0-9_]*" | grep -v "function [a-zA-Z0-9_]*wordpress[a-zA-Z0-9_]*"
   ```

2. **IDE Search**: Using IDE search functionality with regular expressions to find and review instances.

3. **Custom Script**: Developing a custom PHP script to identify and categorize instances based on context.

### WordPress Visual Assets

WordPress includes various visual assets that need to be identified and replaced:

1. **Logo Images**:
   - WordPress logo in various formats (PNG, SVG, etc.)
   - Dashboard logos and branding elements
   - Login screen logos
   - Favicon and app icons

2. **UI Elements**:
   - Admin interface icons containing the WordPress logo
   - About page graphics and illustrations
   - Default theme branding elements
   - Plugin and theme directory graphics

3. **Documentation Images**:
   - Screenshots containing WordPress branding
   - Diagrams and illustrations in documentation

4. **Tools for Identifying Visual Assets**:
   - Image search tools to find files with WordPress logos
   - Manual inspection of UI elements
   - CSS and theme files that reference WordPress branding
   ```bash
   # Find image files that might contain WordPress logos
   find . -type f -name "*.png" -o -name "*.jpg" -o -name "*.svg" -o -name "*.gif" | xargs grep -l "wp" 2>/dev/null

   # Search CSS files for WordPress logo references
   grep -r "wordpress-logo" --include="*.css" .
   ```

**Note**: Replacement of visual assets will be a manual process requiring design work to create new WigglePuppy logos, icons, and other visual elements that maintain the same style and dimensions as the original WordPress assets.

## Step-by-Step Rebranding Process

### Phase 1: Analysis and Preparation

1. **Create a Comprehensive Inventory**:
   - Generate a list of all files containing "WordPress" in any form
   - Categorize instances based on the caveats (copyright, variables, filenames, organization references)
   - Categorize which replacement sites are amenable to using custom Rector rules for the replacement and which would be better as php scripts doing raw regex search/replace
   - Identify WordPress visual assets (logos, icons, images) that need replacement
   - Create a mapping document showing which instances should be changed and which should remain unchanged

2. **Develop Test Cases**:
   - Create test cases that verify the functionality before and after rebranding
   - Include tests for edge cases where rebranding might affect functionality


### Phase 2: Implementation

1. **Automated Replacements**:
   - Develop scripts to perform the replacements according to the rules
   - Use regular expressions with capture groups to preserve casing
   - Example script pattern:
     ```php
     function replace_wordpress_with_wigglepuppy($content) {
         // Preserve casing patterns
         $content = preg_replace('/\bWordPress\b(?!\.org|\.com)(?![a-zA-Z0-9_])(?!-[a-zA-Z0-9_])/', 'WigglePuppy', $content);
         $content = preg_replace('/\bwordpress\b(?!\.org|\.com)(?![a-zA-Z0-9_])(?!-[a-zA-Z0-9_])/', 'wigglepuppy', $content);
         $content = preg_replace('/\bWORDPRESS\b(?!\.org|\.com)(?![a-zA-Z0-9_])(?!-[a-zA-Z0-9_])/', 'WIGGLEPUPPY', $content);

         return $content;
     }
     ```

2. **Custom Rector Rules Development**:
   - Develop custom Rector rules for replacements that can be automated
   - Example custom Rector rule for replacing WordPress with WigglePuppy in string literals:
     ```php
     namespace WigglePuppy\Rector\Rebranding;

     use PhpParser\Node;
     use PhpParser\Node\Scalar\String_;
     use Rector\Core\Rector\AbstractRector;
     use Symplify\RuleDocGenerator\ValueObject\RuleDefinition;

     final class WordPressToWigglePuppyStringRector extends AbstractRector
     {
         public function getRuleDefinition(): RuleDefinition
         {
             // Rule documentation
         }

         public function getNodeTypes(): array
         {
             return [String_::class];
         }

         public function refactor(Node $node): ?Node
         {
             if (!$node instanceof String_) {
                 return null;
             }

             $content = $node->value;

             // Skip if the string contains patterns we shouldn't replace
             if (preg_match('/wordpress\.org|wordpress\.com|function.*wordpress|class.*wordpress|\$.*wordpress/i', $content)) {
                 return null;
             }

             // Replace WordPress with WigglePuppy preserving case
             $newContent = preg_replace('/\bWordPress\b/', 'WigglePuppy', $content);
             $newContent = preg_replace('/\bwordpress\b/', 'wigglepuppy', $newContent);
             $newContent = preg_replace('/\bWORDPRESS\b/', 'WIGGLEPUPPY', $newContent);

             if ($newContent === $content) {
                 return null;
             }

             $node->value = $newContent;
             return $node;
         }
     }
     ```

3. **Manual Review and Adjustments**:
   - Review each file after automated replacements
   - Manually adjust any instances that were incorrectly changed or missed
   - Pay special attention to:
     - User-facing text and messages
     - Documentation and comments
     - Template files
     - Visual assets (logos, icons, images) requiring custom design work

3. **Update Documentation**:
   - Update all documentation files to reflect the new branding
   - Create a mapping document for developers to understand the rebranding changes

### Phase 3: Testing and Verification

1. **Run Automated Tests**:
   - Execute the full test suite to ensure functionality is preserved
   - Check for any failures that might be related to the rebranding

2. **Visual Inspection**:
   - Manually inspect the application UI to ensure all visible instances are properly rebranded
   - Check admin panels, frontend templates, and error messages

3. **Validation Checks**:
   - Run validation scripts to ensure no instances of "WordPress" remain (except those covered by caveats)
   - Verify that all caveats have been respected:
     ```bash
     # Check that copyright notices haven't changed
     grep -r "Copyright" --include="*.php" . > copyright_after.txt
     diff copyright_before.txt copyright_after.txt

     # Verify function names haven't changed
     grep -r "function" --include="*.php" . > functions_after.txt
     diff functions_before.txt functions_after.txt
     ```

### Phase 4: Deployment

1. **Staged Rollout**:
   - Deploy the rebranded codebase to a staging environment first
   - Perform comprehensive testing in the staging environment
   - Address any issues discovered during staging

2. **Production Deployment**:
   - Deploy to production using a controlled rollout process
   - Monitor for any issues or unexpected behavior

3. **Documentation Update**:
   - Update all external documentation to reflect the new branding
   - Provide guidance to users and developers about the rebranding

## Rollback Plan

In case significant issues are discovered after the rebranding:

1. **Immediate Rollback Trigger Criteria**:
   - Critical functionality failures
   - Security vulnerabilities introduced by the rebranding
   - Significant performance degradation

2. **Rollback Process**:
   - Restore from the pre-rebranding backup
   - Revert to the previous version control branch
   - Communicate the rollback to all stakeholders

3. **Issue Analysis**:
   - Analyze what went wrong during the rebranding
   - Document the issues for future attempts
   - Develop a revised plan addressing the discovered issues

## Conclusion

This rebranding plan provides a structured approach to changing "WordPress" to "WigglePuppy" throughout the codebase while respecting the specified caveats. By following this plan, we can ensure a smooth transition with minimal disruption to functionality and user experience.

The key to successful rebranding is careful attention to context and thorough testing. By maintaining a balance between automated tools and manual review, we can achieve a comprehensive rebranding while preserving the integrity of the codebase.
